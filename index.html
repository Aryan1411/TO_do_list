<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Simple Toâ€‘Do List</title>
  <meta name="description" content="A tiny, fast toâ€‘do list web app in a single HTML file with localStorage." />
  <style>
    :root{
      --bg-red: red;               /* Per brief: make background red */
      --card: #ffffff;
      --text: #111;
      --muted: #555;
      --accent: #2563eb;
      --accent-contrast: #ffffff;
      --border: #e5e7eb;
      --shadow: 0 10px 20px rgba(0,0,0,0.15);
      --radius: 14px;
      --focus: 2px solid #2563eb;
      --danger: #dc2626;
      --danger-contrast: #fff;
      --success: #16a34a;
    }

    html, body {
      height: 100%;
    }

    body {
      margin: 0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      color: var(--text);
      background: var(--bg-red);
      display: grid;
      place-items: center;
      line-height: 1.4;
    }

    .app {
      width: min(720px, calc(100vw - 24px));
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow: clip;
    }

    header {
      padding: 20px 22px 10px;
      background: linear-gradient(180deg, #ffffff 0%, #fafafa 100%);
      border-bottom: 1px solid var(--border);
    }

    header h1 {
      margin: 0 0 4px;
      font-size: 1.35rem;
      letter-spacing: 0.2px;
    }

    header p {
      margin: 0;
      color: var(--muted);
      font-size: 0.92rem;
    }

    .controls {
      display: grid;
      grid-template-columns: 1fr auto;
      gap: 10px;
      padding: 14px 16px;
      border-bottom: 1px solid var(--border);
      background: #fff;
    }

    .visually-hidden {
      position: absolute !important;
      width: 1px; height: 1px;
      padding: 0; margin: -1px;
      overflow: hidden; clip: rect(0 0 0 0);
      white-space: nowrap; border: 0;
    }

    .input-wrap {
      display: flex;
      gap: 8px;
      align-items: center;
      background: #fff;
      border: 1px solid var(--border);
      border-radius: 10px;
      padding: 8px 10px;
    }

    .input-wrap input[type="text"] {
      flex: 1;
      font-size: 1rem;
      border: none;
      outline: none;
      background: transparent;
      min-width: 0;
    }

    .btn {
      appearance: none;
      border: 1px solid var(--border);
      background: #fff;
      color: var(--text);
      padding: 10px 14px;
      font-size: 0.98rem;
      border-radius: 10px;
      cursor: pointer;
      transition: transform .02s ease, background .15s ease, border-color .15s ease, box-shadow .15s ease;
    }

    .btn:active { transform: translateY(1px); }

    .btn.primary {
      background: var(--accent);
      border-color: var(--accent);
      color: var(--accent-contrast);
    }

    .btn.danger {
      background: var(--danger);
      border-color: var(--danger);
      color: var(--danger-contrast);
    }

    .btn:disabled {
      opacity: 0.55;
      cursor: not-allowed;
      transform: none;
    }

    .toolbar {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
      padding: 10px 16px;
      border-bottom: 1px solid var(--border);
      background: #fff;
    }

    .counter {
      color: var(--muted);
      font-size: 0.92rem;
    }

    ul#todo-list {
      list-style: none;
      padding: 0;
      margin: 0;
      background: #fff;
    }

    li.todo {
      display: grid;
      grid-template-columns: auto 1fr auto;
      gap: 10px;
      align-items: center;
      padding: 12px 16px;
      border-bottom: 1px solid var(--border);
    }

    .todo:last-child {
      border-bottom: none;
    }

    .todo input[type="checkbox"] {
      width: 20px;
      height: 20px;
      cursor: pointer;
      accent-color: var(--success);
    }

    .todo .title {
      overflow-wrap: anywhere;
    }

    .todo.completed .title {
      text-decoration: line-through;
      color: var(--muted);
    }

    .icon-btn {
      border: none;
      background: transparent;
      color: var(--muted);
      padding: 8px;
      border-radius: 8px;
      cursor: pointer;
    }

    .icon-btn:hover {
      background: #f3f4f6;
      color: #111;
    }

    .footer {
      padding: 14px 16px 18px;
      color: var(--muted);
      font-size: 0.9rem;
      text-align: center;
      background: #fff;
      border-top: 1px solid var(--border);
      border-bottom-left-radius: var(--radius);
      border-bottom-right-radius: var(--radius);
    }

    /* Focus styles */
    .btn:focus-visible,
    .icon-btn:focus-visible,
    input[type="text"]:focus-visible,
    input[type="checkbox"]:focus-visible {
      outline: var(--focus);
      outline-offset: 2px;
      box-shadow: 0 0 0 4px rgba(37, 99, 235, 0.15);
    }

    /* Small screens */
    @media (max-width: 480px) {
      header h1 { font-size: 1.2rem; }
      .btn { padding: 10px 12px; }
      .controls { grid-template-columns: 1fr; }
      .toolbar { flex-direction: column; align-items: stretch; }
    }
  </style>
</head>
<body>
  <main class="app" aria-labelledby="app-title">
    <header>
      <h1 id="app-title">Toâ€‘Do List</h1>
      <p>Fast, lightweight, and private â€” your tasks stay in your browser.</p>
    </header>

    <section class="controls" aria-label="Add a new task">
      <div class="input-wrap">
        <label class="visually-hidden" for="new-task">New task</label>
        <input id="new-task" type="text" placeholder="What do you need to do?" autocomplete="off" />
      </div>
      <button id="add-btn" class="btn primary" type="button" aria-label="Add task">Add</button>
    </section>

    <div class="toolbar" aria-label="Task actions">
      <div class="counter" aria-live="polite" aria-atomic="true" id="counter">0 tasks</div>
      <button id="clear-completed" class="btn danger" type="button" disabled>Clear completed</button>
    </div>

    <ul id="todo-list" role="list" aria-label="Toâ€‘Do items"></ul>

    <div class="footer">
      Tip: Press Enter to add a task. Your list is saved automatically.
    </div>
  </main>

  <script>
    (function(){
      'use strict';

      const STORAGE_KEY = 'todo-list-v1';

      /** @type {{id:string,text:string,completed:boolean,created:number}[]} */
      let items = [];

      const el = {
        input: document.getElementById('new-task'),
        add: document.getElementById('add-btn'),
        list: document.getElementById('todo-list'),
        clear: document.getElementById('clear-completed'),
        counter: document.getElementById('counter'),
      };

      // Utilities
      const uid = () => Math.random().toString(36).slice(2, 10) + Date.now().toString(36);

      const save = () => {
        try {
          localStorage.setItem(STORAGE_KEY, JSON.stringify(items));
        } catch (e) {
          // Ignore quota errors for this simple app
        }
      };

      const load = () => {
        try {
          const raw = localStorage.getItem(STORAGE_KEY);
          if (raw) items = JSON.parse(raw) || [];
          // Normalize shape
          items = items.map(t => ({
            id: String(t.id || uid()),
            text: String(t.text || '').trim(),
            completed: Boolean(t.completed),
            created: Number(t.created || Date.now())
          }));
        } catch (e) {
          items = [];
        }
      };

      function render(){
        // Clear list
        el.list.innerHTML = '';

        // Sort by creation time (oldest first)
        const sorted = [...items].sort((a,b) => a.created - b.created);

        for (const item of sorted) {
          const li = document.createElement('li');
          li.className = 'todo' + (item.completed ? ' completed' : '');
          li.dataset.id = item.id;

          // Checkbox
          const cb = document.createElement('input');
          cb.type = 'checkbox';
          cb.checked = item.completed;
          cb.setAttribute('aria-label', item.completed ? 'Mark as not completed' : 'Mark as completed');
          cb.addEventListener('change', () => toggle(item.id));

          // Title
          const title = document.createElement('span');
          title.className = 'title';
          title.textContent = item.text;

          // Delete button
          const del = document.createElement('button');
          del.className = 'icon-btn';
          del.type = 'button';
          del.title = 'Delete task';
          del.setAttribute('aria-label', 'Delete task');
          del.innerHTML = 'ðŸ—‘ï¸';
          del.addEventListener('click', () => remove(item.id));

          li.append(cb, title, del);
          el.list.appendChild(li);
        }

        const total = items.length;
        const remaining = items.filter(t => !t.completed).length;
        el.counter.textContent = `${total} ${total === 1 ? 'task' : 'tasks'} â€¢ ${remaining} left`;
        el.clear.disabled = items.every(t => !t.completed);
      }

      function add(){
        const text = (el.input.value || '').trim();
        if (!text) return;
        items.push({ id: uid(), text, completed: false, created: Date.now() });
        el.input.value = '';
        save();
        render();
        el.input.focus();
      }

      function toggle(id){
        const i = items.findIndex(t => t.id === id);
        if (i >= 0) {
          items[i].completed = !items[i].completed;
          save();
          render();
        }
      }

      function remove(id){
        items = items.filter(t => t.id !== id);
        save();
        render();
      }

      function clearCompleted(){
        items = items.filter(t => !t.completed);
        save();
        render();
      }

      // Event wiring
      el.add.addEventListener('click', add);
      el.input.addEventListener('keydown', (e) => {
        if (e.key === 'Enter') add();
      });
      el.clear.addEventListener('click', clearCompleted);

      // Init
      load();
      render();

      // Optional: expose for debugging
      window.todoApp = { add, remove, toggle, clearCompleted, get items(){ return items; } };
    })();
  </script>
</body>
</html>